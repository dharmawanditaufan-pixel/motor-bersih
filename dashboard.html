<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motor Bersih - Redirecting...</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen">
    <div class="text-center">
        <div class="loader mx-auto mb-4"></div>
        <h2 class="text-xl font-semibold text-gray-800 mb-2">Redirecting...</h2>
        <p class="text-gray-600" id="message">Please wait...</p>
    </div>

    <script>
        // Hash routing handler for dashboard URLs
        // Handles URLs like: /motor-bersih/dashboard.html#new-transaction
        
        const routes = {
            'dashboard': 'pages/dashboard.html',
            'new-transaction': 'pages/register-wash.html',
            'camera-capture': 'pages/camera-capture.html',
            'transactions': 'pages/transactions.html',
            'customers': 'pages/customers.html',
            'operators': 'pages/operators.html',
            'reports': 'pages/reports.html',
            'expenses': 'pages/expenses.html',
            'settings': 'pages/settings.html'
        };

        function handleNavigation() {
            const currentPath = window.location.pathname;
            const hash = window.location.hash.substring(1); // Remove #
            
            console.log('Current Path:', currentPath);
            console.log('Hash:', hash);
            
            // Check if we're on dashboard.html (not in pages/)
            if (currentPath.includes('/dashboard.html') && !currentPath.includes('/pages/')) {
                if (hash && routes[hash]) {
                    const messageEl = document.getElementById('message');
                    messageEl.textContent = `Navigating to ${hash}...`;
                    
                    // Redirect to the proper page
                    setTimeout(() => {
                        window.location.href = routes[hash];
                    }, 500);
                } else if (hash === '' || hash === 'dashboard') {
                    // Redirect to dashboard
                    setTimeout(() => {
                        window.location.href = routes['dashboard'];
                    }, 500);
                } else {
                    // Unknown route, redirect to dashboard
                    document.getElementById('message').textContent = 'Route not found, redirecting to dashboard...';
                    setTimeout(() => {
                        window.location.href = routes['dashboard'];
                    }, 1000);
                }
            }
        }

        // Run on page load
        handleNavigation();
    </script>
</body>
</html>
